"use strict";(self.webpackChunklearning_notes=self.webpackChunklearning_notes||[]).push([[1496],{36375:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>l,contentTitle:()=>r,default:()=>d,frontMatter:()=>a,metadata:()=>o,toc:()=>c});var s=t(85893),i=t(11151);const a={title:"CMD vs ENTRYPOINT",authors:"xiaohai",tags:["Docker"]},r=void 0,o={permalink:"/blog/2022/03/03/cmd-vs-entrypoint",editUrl:"https://github.com/xiaohai-huang/learning-notes/tree/master/blog/2022/03-03-cmd-vs-entrypoint/index.md",source:"@site/blog/2022/03-03-cmd-vs-entrypoint/index.md",title:"CMD vs ENTRYPOINT",description:"The ENTRYPOINT specifies a command that will always be executed when the container starts.",date:"2022-03-03T00:00:00.000Z",formattedDate:"3 March 2022",tags:[{label:"Docker",permalink:"/blog/tags/docker"}],readingTime:1.565,hasTruncateMarker:!0,authors:[{name:"Xiaohai Huang",title:"CS Student",url:"http://github.com/xiaohai-huang",imageURL:"https://github.com/xiaohai-huang.png",key:"xiaohai"}],frontMatter:{title:"CMD vs ENTRYPOINT",authors:"xiaohai",tags:["Docker"]},unlisted:!1,prevItem:{title:"Useful Learning Resources",permalink:"/blog/2022/03/04/useful-resources"},nextItem:{title:"How to Setup a OpenVPN Server?",permalink:"/blog/2022/02/04/how-to-setup-an-openvpn-server"}},l={authorsImageUrls:[void 0]},c=[{value:"ping example",id:"ping-example",level:2}];function h(e){const n=Object.assign({blockquote:"blockquote",p:"p",ul:"ul",li:"li",code:"code",h2:"h2",pre:"pre",admonition:"admonition",a:"a"},(0,i.ah)(),e.components);return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsx)(n.p,{children:"The ENTRYPOINT specifies a command that will always be executed when the container starts."}),"\n",(0,s.jsx)(n.p,{children:"The CMD specifies arguments that will be fed to the ENTRYPOINT."}),"\n"]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"ENTRYPOINT"})," can also be overridden using ",(0,s.jsx)(n.code,{children:"--entrypoint"})," flag"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"CMD"})," will be overridden when running the container with alternative arguments (e.g. ",(0,s.jsx)(n.code,{children:"bash"}),")."]}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"ping-example",children:"ping example"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-dockerfile",metastring:'title="Dockerfile"',children:'FROM debian:wheezy\nENTRYPOINT ["/bin/ping"]\nCMD ["localhost"]\n'})}),"\n",(0,s.jsxs)(n.p,{children:["Running the image without any argument will ping the ",(0,s.jsx)(n.code,{children:"localhost"})]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"$ docker run -it ping-image\nPING localhost (127.0.0.1): 48 data bytes\n56 bytes from 127.0.0.1: icmp_seq=0 ttl=64 time=0.096 ms\n56 bytes from 127.0.0.1: icmp_seq=1 ttl=64 time=0.088 ms\n56 bytes from 127.0.0.1: icmp_seq=2 ttl=64 time=0.088 ms\n^C--- localhost ping statistics ---\n3 packets transmitted, 3 packets received, 0% packet loss\nround-trip min/avg/max/stddev = 0.088/0.091/0.096/0.000 ms\n"})}),"\n",(0,s.jsx)(n.p,{children:"Running the image with an argument will ping the argument"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"$ docker run -it test google.com\nPING google.com (173.194.45.70): 48 data bytes\n56 bytes from 173.194.45.70: icmp_seq=0 ttl=55 time=32.583 ms\n56 bytes from 173.194.45.70: icmp_seq=2 ttl=55 time=30.327 ms\n56 bytes from 173.194.45.70: icmp_seq=4 ttl=55 time=46.379 ms\n^C--- google.com ping statistics ---\n5 packets transmitted, 3 packets received, 40% packet loss\nround-trip min/avg/max/stddev = 30.327/36.430/46.379/7.095 ms\n"})}),"\n",(0,s.jsx)(n.admonition,{type:"info",children:(0,s.jsxs)(n.p,{children:["Docker has a default entrypoint which is ",(0,s.jsx)(n.code,{children:"/bin/sh -c"})]})}),"\n",(0,s.jsx)(n.p,{children:"If the Dockerfile is:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-dockerfile",metastring:'title="Dockerfile"',children:'FROM debian:wheezy\nCMD ["/bin/ping", "localhost"]\n'})}),"\n",(0,s.jsxs)(n.p,{children:["Running the image without any argument will ping ",(0,s.jsx)(n.code,{children:"localhost"})]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"$ docker run -it ping-image\nPING localhost (127.0.0.1): 48 data bytes\n56 bytes from 127.0.0.1: icmp_seq=0 ttl=64 time=0.096 ms\n56 bytes from 127.0.0.1: icmp_seq=1 ttl=64 time=0.088 ms\n56 bytes from 127.0.0.1: icmp_seq=2 ttl=64 time=0.088 ms\n^C--- localhost ping statistics ---\n3 packets transmitted, 3 packets received, 0% packet loss\nround-trip min/avg/max/stddev = 0.088/0.091/0.096/0.000 ms\n"})}),"\n",(0,s.jsx)(n.p,{children:"Running the image with argument will run the argument, the"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"docker run -it test bash\nroot@e8bb7249b843:/#\n"})}),"\n",(0,s.jsx)(n.p,{children:"References:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"https://stackoverflow.com/a/34245657",children:"Stackoverflow answer"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"https://www.ctl.io/developers/blog/post/dockerfile-entrypoint-vs-cmd/",children:"CMD vs ENTRYPOINT"})}),"\n"]})]})}const d=function(e={}){const{wrapper:n}=Object.assign({},(0,i.ah)(),e.components);return n?(0,s.jsx)(n,Object.assign({},e,{children:(0,s.jsx)(h,e)})):h(e)}},11151:(e,n,t)=>{t.d(n,{Zo:()=>o,ah:()=>a});var s=t(67294);const i=s.createContext({});function a(e){const n=s.useContext(i);return s.useMemo((()=>"function"==typeof e?e(n):{...n,...e}),[n,e])}const r={};function o({components:e,children:n,disableParentContext:t}){let o;return o=t?"function"==typeof e?e({}):e||r:a(e),s.createElement(i.Provider,{value:o},n)}}}]);