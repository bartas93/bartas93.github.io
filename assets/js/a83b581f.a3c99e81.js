"use strict";(self.webpackChunklearning_notes=self.webpackChunklearning_notes||[]).push([[6494],{72551:(e,n,o)=>{o.r(n),o.d(n,{assets:()=>c,contentTitle:()=>a,default:()=>d,frontMatter:()=>i,metadata:()=>r,toc:()=>l});var t=o(85893),s=o(11151);const i={title:"Accessing a WSL2 Networking Apps From Your LAN",authors:"xiaohai",tags:["technology","WSL"],description:"This blog shows how to access networking apps running on WSL2 from your LAN. This can be useful for making the application available for other devices on the network"},a=void 0,r={permalink:"/blog/2022/08/17/accessing-wsl2-networking-apps",editUrl:"https://github.com/xiaohai-huang/learning-notes/tree/master/blog/2022/08-17-accessing-wsl2-networking-apps/index.md",source:"@site/blog/2022/08-17-accessing-wsl2-networking-apps/index.md",title:"Accessing a WSL2 Networking Apps From Your LAN",description:"This blog shows how to access networking apps running on WSL2 from your LAN. This can be useful for making the application available for other devices on the network",date:"2022-08-17T00:00:00.000Z",formattedDate:"17 August 2022",tags:[{label:"technology",permalink:"/blog/tags/technology"},{label:"WSL",permalink:"/blog/tags/wsl"}],readingTime:1.365,hasTruncateMarker:!0,authors:[{name:"Xiaohai Huang",title:"CS Student",url:"http://github.com/xiaohai-huang",imageURL:"https://github.com/xiaohai-huang.png",key:"xiaohai"}],frontMatter:{title:"Accessing a WSL2 Networking Apps From Your LAN",authors:"xiaohai",tags:["technology","WSL"],description:"This blog shows how to access networking apps running on WSL2 from your LAN. This can be useful for making the application available for other devices on the network"},unlisted:!1,prevItem:{title:"How to Setup a ShadowSocks VPN Server?",permalink:"/blog/2022/11/7/how-to-setup-a-ss-vpn-server"},nextItem:{title:"LeetCode 75 Study Plan",permalink:"/blog/2022/07/09/leetcode-75"}},c={authorsImageUrls:[void 0]},l=[{value:"Motivation",id:"motivation",level:2},{value:"Solution",id:"solution",level:2},{value:"Make the App Accept LAN Connections",id:"make-the-app-accept-lan-connections",level:3},{value:"Port Proxy",id:"port-proxy",level:3},{value:"References",id:"references",level:2}];function h(e){const n=Object.assign({p:"p",h2:"h2",h3:"h3",blockquote:"blockquote",strong:"strong",code:"code",pre:"pre",admonition:"admonition",ul:"ul",li:"li",a:"a"},(0,s.ah)(),e.components);return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.p,{children:"When using a WSL 1 distribution, if your computer was set up to be accessed by your LAN, then applications run in WSL could be accessed on your LAN directly."}),"\n",(0,t.jsx)(n.p,{children:"However, this isn't the default case in WSL2 as it has a virtualized ethernet adapter with its own unique IP address."}),"\n",(0,t.jsx)(n.h2,{id:"motivation",children:"Motivation"}),"\n",(0,t.jsx)(n.p,{children:"This can be useful for making the application available for other devices on the network, which allows us to debug a web app from mobile devices."}),"\n",(0,t.jsx)(n.h2,{id:"solution",children:"Solution"}),"\n",(0,t.jsx)(n.h3,{id:"make-the-app-accept-lan-connections",children:"Make the App Accept LAN Connections"}),"\n",(0,t.jsxs)(n.blockquote,{children:["\n",(0,t.jsx)(n.p,{children:"When using remote IP addresses to connect to your applications, they will be treated as connections from the Local Area Network (LAN). This means that you will need to make sure your application can accept LAN connections."}),"\n"]}),"\n",(0,t.jsxs)(n.p,{children:["For example, you may need to ",(0,t.jsx)(n.strong,{children:"bind"})," your application to ",(0,t.jsx)(n.code,{children:"0.0.0.0"})," instead of ",(0,t.jsx)(n.code,{children:"127.0.0.1"}),"."]}),"\n",(0,t.jsxs)(n.p,{children:["In the example of a Next.js app, this can be done with the command: ",(0,t.jsx)(n.code,{children:"npx next dev -H 0.0.0.0"})]}),"\n",(0,t.jsx)(n.h3,{id:"port-proxy",children:"Port Proxy"}),"\n",(0,t.jsxs)(n.p,{children:["Here's an example PowerShell command to add a port proxy that listens on port 3000 on the host and connects it to port 3000 to the WSL2 VM with IP address ",(0,t.jsx)(n.code,{children:"172.22.94.49"}),"."]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-powershell",children:"netsh interface portproxy add v4tov4 listenport=3000 listenaddress=0.0.0.0 connectport=3000 connectaddress=172.22.94.49\n"})}),"\n",(0,t.jsxs)(n.admonition,{type:"info",children:[(0,t.jsxs)(n.p,{children:["When you restart your PC, the IP address of the WSL2 instance will change, you need to delete the old ",(0,t.jsx)(n.strong,{children:"port proxy"})," and run the command above again. Below shows how to delete the old ",(0,t.jsx)(n.strong,{children:"port proxy"})," which listens on port 3000 on the host."]}),(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-powershell",children:"netsh interface portproxy delete v4tov4 listenport=3000 listenaddress=0.0.0.0\n"})})]}),"\n",(0,t.jsx)(n.h2,{id:"references",children:"References"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.a,{href:"https://docs.microsoft.com/en-us/windows/wsl/networking",children:"MS Docs"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.a,{href:"https://nextjs.org/docs/api-reference/cli#development",children:"Next.js CLI Docs"})}),"\n"]})]})}const d=function(e={}){const{wrapper:n}=Object.assign({},(0,s.ah)(),e.components);return n?(0,t.jsx)(n,Object.assign({},e,{children:(0,t.jsx)(h,e)})):h(e)}},11151:(e,n,o)=>{o.d(n,{Zo:()=>r,ah:()=>i});var t=o(67294);const s=t.createContext({});function i(e){const n=t.useContext(s);return t.useMemo((()=>"function"==typeof e?e(n):{...n,...e}),[n,e])}const a={};function r({components:e,children:n,disableParentContext:o}){let r;return r=o?"function"==typeof e?e({}):e||a:i(e),t.createElement(s.Provider,{value:r},n)}}}]);