"use strict";(self.webpackChunklearning_notes=self.webpackChunklearning_notes||[]).push([[5444],{34605:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>d,contentTitle:()=>r,default:()=>h,frontMatter:()=>s,metadata:()=>l,toc:()=>c});var a=n(85893),i=n(11151);const s={sidebar_label:"Practical 1",title:"Practical 1 - Number of Cyclists",description:"Use pandas to prepare and manipulate data. Use matplotlib to visualize data. Use statsmodel to train a linear regression model, and improve the model by analyzing its performance.",image:"https://digitsole.com/wp-content/uploads/2018/03/different-type-cyclists.jpg"},r=void 0,l={id:"cab420-machine-learning/prac-1",title:"Practical 1 - Number of Cyclists",description:"Use pandas to prepare and manipulate data. Use matplotlib to visualize data. Use statsmodel to train a linear regression model, and improve the model by analyzing its performance.",source:"@site/university/cab420-machine-learning/013-prac-1.md",sourceDirName:"cab420-machine-learning",slug:"/cab420-machine-learning/prac-1",permalink:"/university/cab420-machine-learning/prac-1",draft:!1,unlisted:!1,editUrl:"https://github.com/xiaohai-huang/learning-notes/tree/master/university/cab420-machine-learning/013-prac-1.md",tags:[],version:"current",lastUpdatedBy:"xiaohai-huang",lastUpdatedAt:1695964360,formattedLastUpdatedAt:"29 Sept 2023",sidebarPosition:13,frontMatter:{sidebar_label:"Practical 1",title:"Practical 1 - Number of Cyclists",description:"Use pandas to prepare and manipulate data. Use matplotlib to visualize data. Use statsmodel to train a linear regression model, and improve the model by analyzing its performance.",image:"https://digitsole.com/wp-content/uploads/2018/03/different-type-cyclists.jpg"},sidebar:"university",previous:{title:"Multiple Linear Regression",permalink:"/university/cab420-machine-learning/multiple-linear-regression"},next:{title:"Overfitting",permalink:"/university/cab420-machine-learning/overfitting"}},d={},c=[{value:"How to Find Columns that are in Common Between Tables?",id:"how-to-find-columns-that-are-in-common-between-tables",level:2},{value:"How to Convert Date String Into Datetime Object?",id:"how-to-convert-date-string-into-datetime-object",level:2},{value:"Date Information is Located in a Single Column",id:"date-information-is-located-in-a-single-column",level:3},{value:"Date Information is Spread Across Multiple Columns",id:"date-information-is-spread-across-multiple-columns",level:3},{value:"How to Concatenate Tables?",id:"how-to-concatenate-tables",level:2},{value:"Horizontal (left and right)",id:"horizontal-left-and-right",level:3},{value:"Vertical (Stack)",id:"vertical-stack",level:3},{value:"How to Filter Rows By Date?",id:"how-to-filter-rows-by-date",level:2},{value:"References",id:"references",level:2}];function o(e){const t=Object.assign({p:"p",img:"img",h2:"h2",a:"a",code:"code",table:"table",thead:"thead",tr:"tr",th:"th",tbody:"tbody",td:"td",pre:"pre",admonition:"admonition",h3:"h3",ul:"ul",li:"li",strong:"strong"},(0,i.ah)(),e.components);return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(t.p,{children:(0,a.jsx)(t.img,{src:"https://digitsole.com/wp-content/uploads/2018/03/different-type-cyclists.jpg",alt:"cyclists"})}),"\n",(0,a.jsx)(t.h2,{id:"how-to-find-columns-that-are-in-common-between-tables",children:"How to Find Columns that are in Common Between Tables?"}),"\n",(0,a.jsxs)(t.p,{children:["Use ",(0,a.jsx)(t.a,{href:"https://www.w3schools.com/python/ref_set_intersection.asp",children:"Set"})," and ",(0,a.jsx)(t.code,{children:"set.intersection(set1, set2)"})," to do this. One use case is to vertically concatenate tables. Such as combine data from different years (2014, 2015, 2016) together."]}),"\n",(0,a.jsx)(t.p,{children:(0,a.jsx)(t.code,{children:"Year-2014.csv"})}),"\n",(0,a.jsxs)(t.table,{children:[(0,a.jsx)(t.thead,{children:(0,a.jsxs)(t.tr,{children:[(0,a.jsx)(t.th,{children:"Date"}),(0,a.jsx)(t.th,{children:"Station Number"}),(0,a.jsx)(t.th,{children:"Number Cyclists"})]})}),(0,a.jsxs)(t.tbody,{children:[(0,a.jsxs)(t.tr,{children:[(0,a.jsx)(t.td,{children:"2014-01-10"}),(0,a.jsx)(t.td,{children:"897123"}),(0,a.jsx)(t.td,{children:"15"})]}),(0,a.jsxs)(t.tr,{children:[(0,a.jsx)(t.td,{children:"2014-03-09"}),(0,a.jsx)(t.td,{children:"362300"}),(0,a.jsx)(t.td,{children:"21"})]})]})]}),"\n",(0,a.jsx)(t.p,{children:(0,a.jsx)(t.code,{children:"Year-2015.csv"})}),"\n",(0,a.jsxs)(t.table,{children:[(0,a.jsx)(t.thead,{children:(0,a.jsxs)(t.tr,{children:[(0,a.jsx)(t.th,{children:"Date"}),(0,a.jsx)(t.th,{children:"Station Number"}),(0,a.jsx)(t.th,{children:"Number Cyclists"}),(0,a.jsx)(t.th,{children:"Note"})]})}),(0,a.jsxs)(t.tbody,{children:[(0,a.jsxs)(t.tr,{children:[(0,a.jsx)(t.td,{children:"2015-01-10"}),(0,a.jsx)(t.td,{children:"897123"}),(0,a.jsx)(t.td,{children:"25"}),(0,a.jsx)(t.td,{children:"good"})]}),(0,a.jsxs)(t.tr,{children:[(0,a.jsx)(t.td,{children:"2015-03-09"}),(0,a.jsx)(t.td,{children:"362300"}),(0,a.jsx)(t.td,{children:"52"}),(0,a.jsx)(t.td,{children:"nice measure"})]})]})]}),"\n",(0,a.jsx)(t.pre,{children:(0,a.jsx)(t.code,{className:"language-python",children:'all_columns = {"Date", "Station Number", "Number Cyclists", "Note" }\ncommon_columns = all_columns.intersection(year_2014.columns.values,\n                                          year_2014.columns.values)\n'})}),"\n",(0,a.jsxs)(t.p,{children:["The above code will drop the ",(0,a.jsx)(t.code,{children:"Note"})," column."]}),"\n",(0,a.jsxs)(t.admonition,{type:"info",children:[(0,a.jsx)(t.p,{children:"Set intersection example:"}),(0,a.jsx)(t.pre,{children:(0,a.jsx)(t.code,{className:"language-python",children:"first       = {\"c\", \"d\", \"e\"}\nsecond      = {\"c\", \"f\", \"g\"}\nall_columns = {*first, *second} # {'c', 'd', 'f', 'e', 'g'}\n\nresult = all_columns.intersection(first, second)\n\nprint(result) # 'c'\n"})})]}),"\n",(0,a.jsx)(t.h2,{id:"how-to-convert-date-string-into-datetime-object",children:"How to Convert Date String Into Datetime Object?"}),"\n",(0,a.jsxs)(t.p,{children:["Use ",(0,a.jsx)(t.code,{children:"dataframe.apply(func, axis)"})," or ",(0,a.jsx)(t.code,{children:'pandas.to_datetime(data["Date"], format="%d/%m/%Y")'})]}),"\n",(0,a.jsx)(t.h3,{id:"date-information-is-located-in-a-single-column",children:"Date Information is Located in a Single Column"}),"\n",(0,a.jsxs)(t.table,{children:[(0,a.jsx)(t.thead,{children:(0,a.jsxs)(t.tr,{children:[(0,a.jsx)(t.th,{children:"Date"}),(0,a.jsx)(t.th,{children:"Number Cyclists"})]})}),(0,a.jsxs)(t.tbody,{children:[(0,a.jsxs)(t.tr,{children:[(0,a.jsx)(t.td,{children:"2014-03-22"}),(0,a.jsx)(t.td,{children:"91"})]}),(0,a.jsxs)(t.tr,{children:[(0,a.jsx)(t.td,{children:"2014-03-23"}),(0,a.jsx)(t.td,{children:"21"})]})]})]}),"\n",(0,a.jsx)(t.pre,{children:(0,a.jsx)(t.code,{className:"language-python",children:'data["Date"] = pandas.to_datetime(data["Date"], format="%Y-%m-%d")\n'})}),"\n",(0,a.jsx)(t.h3,{id:"date-information-is-spread-across-multiple-columns",children:"Date Information is Spread Across Multiple Columns"}),"\n",(0,a.jsxs)(t.table,{children:[(0,a.jsx)(t.thead,{children:(0,a.jsxs)(t.tr,{children:[(0,a.jsx)(t.th,{children:"Year"}),(0,a.jsx)(t.th,{children:"Month"}),(0,a.jsx)(t.th,{children:"Day"}),(0,a.jsx)(t.th,{children:"Number Cyclists"})]})}),(0,a.jsxs)(t.tbody,{children:[(0,a.jsxs)(t.tr,{children:[(0,a.jsx)(t.td,{children:"2014"}),(0,a.jsx)(t.td,{children:"03"}),(0,a.jsx)(t.td,{children:"22"}),(0,a.jsx)(t.td,{children:"91"})]}),(0,a.jsxs)(t.tr,{children:[(0,a.jsx)(t.td,{children:"2014"}),(0,a.jsx)(t.td,{children:"03"}),(0,a.jsx)(t.td,{children:"23"}),(0,a.jsx)(t.td,{children:"21"})]})]})]}),"\n",(0,a.jsx)(t.pre,{children:(0,a.jsx)(t.code,{className:"language-python",children:"from datetime import datetime\n# A new column called 'Date' will be created and its data type is datetime64\ndata[\"Date\"] = data.apply(lambda row: datetime(row.Year, row.Month, row.Day), axis = 1)\n"})}),"\n",(0,a.jsx)(t.h2,{id:"how-to-concatenate-tables",children:"How to Concatenate Tables?"}),"\n",(0,a.jsx)(t.p,{children:"There are two types of concatenation. Horizontal and Vertical."}),"\n",(0,a.jsx)(t.h3,{id:"horizontal-left-and-right",children:"Horizontal (left and right)"}),"\n",(0,a.jsx)(t.pre,{children:(0,a.jsx)(t.code,{className:"language-python",children:'pandas.merge(left,right, on="Column Name")\n'})}),"\n",(0,a.jsx)(t.h3,{id:"vertical-stack",children:"Vertical (Stack)"}),"\n",(0,a.jsx)(t.pre,{children:(0,a.jsx)(t.code,{className:"language-python",children:"pandas.concat([table1, table2, table3])\n"})}),"\n",(0,a.jsx)(t.h2,{id:"how-to-filter-rows-by-date",children:"How to Filter Rows By Date?"}),"\n",(0,a.jsx)(t.p,{children:"For example, get the data between 2014~2018"}),"\n",(0,a.jsx)(t.pre,{children:(0,a.jsx)(t.code,{className:"language-python",children:'# 2014-2018\ndata = data[    (2014 <= data["Date"].dt.year)\n             &  (data["Date"].dt.year <= 2018)\n           ]\n'})}),"\n",(0,a.jsx)(t.admonition,{type:"warning",children:(0,a.jsxs)(t.ul,{children:["\n",(0,a.jsxs)(t.li,{children:["& stands for ",(0,a.jsx)(t.code,{children:"and"})]}),"\n",(0,a.jsxs)(t.li,{children:[(0,a.jsx)(t.strong,{children:"Operands"})," need to be surrounded by brackets."]}),"\n"]})}),"\n",(0,a.jsx)(t.h2,{id:"references",children:"References"}),"\n",(0,a.jsxs)(t.p,{children:["Practical 1 link: ",(0,a.jsx)(t.a,{href:"https://github.com/xiaohai-huang/cab420-workspace/tree/master/work/week1/CAB420_Prac1",children:"https://github.com/xiaohai-huang/cab420-workspace/tree/master/work/week1/CAB420_Prac1"})]})]})}const h=function(e={}){const{wrapper:t}=Object.assign({},(0,i.ah)(),e.components);return t?(0,a.jsx)(t,Object.assign({},e,{children:(0,a.jsx)(o,e)})):o(e)}},11151:(e,t,n)=>{n.d(t,{Zo:()=>l,ah:()=>s});var a=n(67294);const i=a.createContext({});function s(e){const t=a.useContext(i);return a.useMemo((()=>"function"==typeof e?e(t):{...t,...e}),[t,e])}const r={};function l({components:e,children:t,disableParentContext:n}){let l;return l=n?"function"==typeof e?e({}):e||r:s(e),a.createElement(i.Provider,{value:l},t)}}}]);