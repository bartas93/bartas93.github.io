"use strict";(self.webpackChunklearning_notes=self.webpackChunklearning_notes||[]).push([[6873],{80512:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>a,contentTitle:()=>c,default:()=>d,frontMatter:()=>s,metadata:()=>i,toc:()=>l});var o=t(85893),r=t(11151);const s={sidebar_label:"\ud83e\uddec Prototype",description:"JavaScript prototype notes."},c="\ud83e\uddec Prototype",i={id:"Web/JavaScript/prototype",title:"\ud83e\uddec Prototype",description:"JavaScript prototype notes.",source:"@site/docs/Web/JavaScript/04-prototype.md",sourceDirName:"Web/JavaScript",slug:"/Web/JavaScript/prototype",permalink:"/docs/Web/JavaScript/prototype",draft:!1,unlisted:!1,editUrl:"https://github.com/xiaohai-huang/learning-notes/tree/master/docs/Web/JavaScript/04-prototype.md",tags:[],version:"current",lastUpdatedBy:"xiaohai-huang",lastUpdatedAt:1670207340,formattedLastUpdatedAt:"05 Dec 2022",sidebarPosition:4,frontMatter:{sidebar_label:"\ud83e\uddec Prototype",description:"JavaScript prototype notes."},sidebar:"notesSidebar",previous:{title:"\ud83d\udcdf var - let - const",permalink:"/docs/Web/JavaScript/varible-declaration"},next:{title:"Proxy",permalink:"/docs/Web/JavaScript/proxy"}},a={},l=[{value:"Prototype Chain",id:"prototype-chain",level:2},{value:"Setting a Prototype",id:"setting-a-prototype",level:2},{value:"<code>Object.create</code>",id:"objectcreate",level:3},{value:"Constructor",id:"constructor",level:3},{value:"Own Property",id:"own-property",level:4},{value:"Inheritance",id:"inheritance",level:2},{value:"References",id:"references",level:2}];function p(e){const n=Object.assign({h1:"h1",p:"p",code:"code",strong:"strong",admonition:"admonition",h2:"h2",ul:"ul",li:"li",pre:"pre",ol:"ol",h3:"h3",h4:"h4"},(0,r.ah)(),e.components);return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(n.h1,{id:"-prototype",children:"\ud83e\uddec Prototype"}),"\n",(0,o.jsxs)(n.p,{children:["Every object has a built-in property, which is ",(0,o.jsx)(n.code,{children:"prototype"}),". The ",(0,o.jsx)(n.code,{children:"prototype"})," itself is an object, so the prototype will have its own prototype, making what's called a ",(0,o.jsx)(n.strong,{children:"prototype chain"}),"."]}),"\n",(0,o.jsxs)(n.p,{children:["The prototype chain ends when we reach a prototype that has ",(0,o.jsx)(n.code,{children:"null"})," for its own prototype."]}),"\n",(0,o.jsx)(n.admonition,{type:"note",children:(0,o.jsxs)(n.p,{children:["The standard way to access an object's prototype is ",(0,o.jsx)(n.code,{children:"Object.getPrototypeOf(obj)"})," method."]})}),"\n",(0,o.jsx)(n.h2,{id:"prototype-chain",children:"Prototype Chain"}),"\n",(0,o.jsx)(n.p,{children:"When you try to access a property of an object:"}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsxs)(n.li,{children:["If the property cannot be found on the object ",(0,o.jsx)(n.strong,{children:"itself"}),", the prototype is searched for the property."]}),"\n",(0,o.jsxs)(n.li,{children:["If the property still cannot be found, the ",(0,o.jsx)(n.strong,{children:"prototype's prototype"})," is searched, and so on."]}),"\n",(0,o.jsxs)(n.li,{children:["If the ",(0,o.jsx)(n.strong,{children:"end"})," of the ",(0,o.jsx)(n.strong,{children:"prototype chain"})," is reached, the property still cannot be found, in this case ",(0,o.jsx)(n.code,{children:"undefined"})," is returned."]}),"\n"]}),"\n",(0,o.jsx)(n.p,{children:"Let's illustrate the above steps using a concrete example."}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-js",children:'const person = {\n  name: "dan",\n  sayHello() {\n    console.log(`Hello mate, my name is ${this.name}`);\n  },\n};\n\nperson.sayHello();\nconsole.log(person.toString());\n'})}),"\n",(0,o.jsxs)(n.p,{children:["When we call ",(0,o.jsx)(n.code,{children:"person.toString()"}),", the JS engine"]}),"\n",(0,o.jsxs)(n.ol,{children:["\n",(0,o.jsxs)(n.li,{children:["Looks for ",(0,o.jsx)(n.code,{children:"toString"})," in ",(0,o.jsx)(n.code,{children:"person"})," object."]}),"\n",(0,o.jsxs)(n.li,{children:["Cannot find it, so looks in the ",(0,o.jsx)(n.strong,{children:"prototype"})," of ",(0,o.jsx)(n.code,{children:"person"})," for ",(0,o.jsx)(n.code,{children:"toString"}),"."]}),"\n",(0,o.jsxs)(n.li,{children:["Finds ",(0,o.jsx)(n.code,{children:"toString"})," in person's ",(0,o.jsx)(n.strong,{children:"prototype"}),", which is ",(0,o.jsx)(n.code,{children:"Object.prototype"})," and calls it."]}),"\n"]}),"\n",(0,o.jsx)(n.h2,{id:"setting-a-prototype",children:"Setting a Prototype"}),"\n",(0,o.jsx)(n.p,{children:"There are many ways of setting an object's prototype in JS."}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsx)(n.li,{children:(0,o.jsx)(n.code,{children:"Object.create(obj)"})}),"\n",(0,o.jsx)(n.li,{children:"constructor"}),"\n"]}),"\n",(0,o.jsx)(n.h3,{id:"objectcreate",children:(0,o.jsx)(n.code,{children:"Object.create"})}),"\n",(0,o.jsxs)(n.p,{children:["The ",(0,o.jsx)(n.code,{children:"Object.create"})," method creates a new object and allows you to specify an object that will be used as the new object's prototype."]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-js",children:'const personPrototype = {\n  sayHello() {\n    console.log(`Hello mate, my name is ${this.name}`);\n  },\n};\n\nconst p = Object.create(personPrototype);\np.name = "xiaohai";\n\np.sayHello();\n'})}),"\n",(0,o.jsxs)(n.p,{children:["The above code create a object with ",(0,o.jsx)(n.code,{children:"personPrototype"})," as its prototype. We are able to call ",(0,o.jsx)(n.code,{children:"sayHello()"})," on the new object because the prototype provides the its implementation."]}),"\n",(0,o.jsx)(n.h3,{id:"constructor",children:"Constructor"}),"\n",(0,o.jsxs)(n.p,{children:["In JS, all functions have a property called ",(0,o.jsx)(n.code,{children:"prototype"}),". When you call a function as a constructor, this property (",(0,o.jsx)(n.code,{children:"prototype"}),") is set as the prototype of the newly constructed object. (",(0,o.jsx)(n.code,{children:"obj.__proto__"}),")"]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-js",children:'const personPrototype = {\n  sayHello() {\n    console.log(`Hello mate, my name is ${this.name}`);\n  },\n};\n\nfunction Person(name) {\n  this.name = name;\n}\nconsole.log(Person.prototype);\n\nObject.assign(Person.prototype, personPrototype);\nconsole.log(Person.prototype);\n\nconst p = new Person("dan=dan");\np.sayHello();\nObject.getPrototypeOf(p) === personPrototype;\n'})}),"\n",(0,o.jsxs)(n.admonition,{type:"note",children:[(0,o.jsxs)(n.p,{children:[(0,o.jsx)(n.code,{children:"Object.assign"})," is used to preserve the ",(0,o.jsx)(n.code,{children:"Person.prototype.constructor"})," property."]}),(0,o.jsxs)(n.p,{children:["The behavior of ",(0,o.jsx)(n.code,{children:"instanceof"})," is controlled by ",(0,o.jsx)(n.code,{children:"Symbol.hasInstance"}),", not constructor:"]}),(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-js",children:"const arr = [];\narr.constructor = String;\narr instanceof String; // false\narr instanceof Array; // true\n"})})]}),"\n",(0,o.jsx)(n.h4,{id:"own-property",children:"Own Property"}),"\n",(0,o.jsxs)(n.p,{children:["The ",(0,o.jsx)(n.code,{children:"p"})," object created above has 2 properties:"]}),"\n",(0,o.jsxs)(n.ol,{children:["\n",(0,o.jsxs)(n.li,{children:["a ",(0,o.jsx)(n.code,{children:"name"})," property, which is set in the constructor, so it appears directly on the object."]}),"\n",(0,o.jsxs)(n.li,{children:["a ",(0,o.jsx)(n.code,{children:"sayHello"})," property, which is set in the prototype."]}),"\n"]}),"\n",(0,o.jsxs)(n.p,{children:[(0,o.jsx)(n.strong,{children:"Properties"})," that are defined directly in the object, like ",(0,o.jsx)(n.code,{children:"name"})," here, are called ",(0,o.jsx)(n.strong,{children:"own properties"}),". We can check if a property is an ",(0,o.jsx)(n.strong,{children:"own property"})," using ",(0,o.jsx)(n.code,{children:"Object.hasOwn(obj, prop)"}),"."]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-js",children:'const p = new Person("xiaohai");\n\nconsole.log(Object.hasOwn(p, "name")); // true\nconsole.log(Object.hasOwn(p, "sayHello")); // false\n'})}),"\n",(0,o.jsx)(n.h2,{id:"inheritance",children:"Inheritance"}),"\n",(0,o.jsx)(n.h2,{id:"references",children:"References"})]})}const d=function(e={}){const{wrapper:n}=Object.assign({},(0,r.ah)(),e.components);return n?(0,o.jsx)(n,Object.assign({},e,{children:(0,o.jsx)(p,e)})):p(e)}},11151:(e,n,t)=>{t.d(n,{Zo:()=>i,ah:()=>s});var o=t(67294);const r=o.createContext({});function s(e){const n=o.useContext(r);return o.useMemo((()=>"function"==typeof e?e(n):{...n,...e}),[n,e])}const c={};function i({components:e,children:n,disableParentContext:t}){let i;return i=t?"function"==typeof e?e({}):e||c:s(e),o.createElement(r.Provider,{value:i},n)}}}]);